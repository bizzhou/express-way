<div *ngIf="dataLoaded">

  <mat-list>

    <h4>From</h4>
    <mat-card *ngFor="let res of flights.from">

      <mat-card-content>

        <div *ngIf="res.length > 1 ; else fromStraightFlight">

          <div *ngFor="let item of res">

            <span>{{ item.airlineId }}</span>
            <span>{{ item.flightNumber }}</span>
            <span>{{ item.fromAirport }}</span>
            <span>{{ item.toAirport }}</span>
            <span>{{ item.depatureTime }}</span>
            <span>{{ item.arrivalTime }}</span>
            <span>{{ item.legNumber }}</span>
            <span>{{ item.fare }}</span>
            <span>{{ item.classType}}</span>
            <span>{{ item.fareType }}</span>

          </div>

          <button mat-button (click)="buyFromTicket(res)">Reserve</button>
          <button mat-button (click)="bidFromTicket(res)">Bid</button>

        </div>

        <ng-template #fromStraightFlight>

          <div *ngFor="let flight of res">

            <span>{{ flight.airlineId }}</span>
            <span>{{ flight.flightNumber }}</span>
            <span>{{ flight.leg_number }}</span>
            <span>{{ flight.fare }}</span>
            <span>{{ flight.classType}}</span>
            <span>{{ flight.fareType }}</span>

            <button mat-button (click)="buyFromTicket(flight)">Reserve</button>
            <button mat-button (click)="bidFromTicket(flight)">Bid</button>

          </div>
        </ng-template>

      </mat-card-content>

    </mat-card>


  </mat-list>

  <!-- Separator -->

  <mat-list>

    <h4>Return</h4>
    <mat-card *ngFor="let res of flights.to">

      <mat-card-content>

        <div *ngIf="res.length > 1 ; else straightFlight">

          <div *ngFor="let item of res">
            <span>{{ item.airlineId }}</span>
            <span>{{ item.flightNumber }}</span>
            <span>{{ item.fromAirport }}</span>
            <span>{{ item.toAirport }}</span>
            <span>{{ item.depatureTime }}</span>
            <span>{{ item.arrivalTime }}</span>
            <span>{{ item.legNumber }}</span>
            <span>{{ item.fare }}</span>
            <span>{{ item.classType}}</span>
            <span>{{ item.fareType }}</span>
          </div>

          <button mat-button (click)="buyToTicket(res)">Reserve</button>
          <button mat-button (click)="bidToTicket(res)">Bid</button>

        </div>

        <ng-template #straightFlight>

          <div *ngFor="let flight of res">

            <span>{{ flight.airlineId }}</span>
            <span>{{ flight.flightNumber }}</span>
            <span>{{ flight.leg_number }}</span>
            <span>{{ flight.fare }}</span>
            <span>{{ flight.classType}}</span>
            <span>{{ flight.fareType }}</span>

            <button mat-button (click)="buyToTicket(flight)">Reserve</button>
            <button mat-button (click)="bidToTicket(flight)">Bid</button>

          </div>
        </ng-template>

      </mat-card-content>

    </mat-card>

  </mat-list>

</div>